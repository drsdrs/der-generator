<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>sickhornet!</title>
		<meta name="description" content="" />
		<meta name="author" content="dni" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<!--		<meta name="viewport" content="width=device-width; initial-scale=1.0" /> -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />

	</head>

	<body>
		<script>

	this.Audiolib=function e(t,n,r,i){function s(e){s.list.push(e)}function a(e){var t=new o(e);t.subarray=t.subarray||t.slice;return t}function l(e,t,n,r){if(f){f(e,t,{get:function(){return n},enumerable:!!r})}else{e[t]=n}}function c(e){var t=arguments,n=t.length,r,i;for(r=1;r<n;r++){for(i in t[r]){if(t[r].hasOwnProperty(i)){e[i]=t[r][i]}}}return e}function h(e,t,n){var r;for(r in e){(e.hasOwnProperty(r)||n)&&t.call(e,e[r],r)}return e}function p(e,t,n){var r,s;if(!n){n=[];r=/^\s*function\s*\w*\s*\(([^\)]+)/.exec(t);if(r){r[1].replace(/[a-z$_0-9]+/ig,function(e){n.push(e)})}else{for(r=0;r<t.length;r++){n[r]=i(r+2).join("_")}}}s=Function("var __q;return function "+e+"("+n.join()+"){var i; if(__q){__q=!__q}else if(this instanceof "+e+")this.__CLASSCONSTRUCTOR.apply(this,arguments);else{__q=!__q;i=new "+e+";i.__CLASSCONSTRUCTOR.apply(i,arguments);return i}};")();s.prototype=t.prototype;s.prototype.__CLASSCONSTRUCTOR=t;c(s,t);return s}function d(e,t,n,r){this.parameter=e;this.automation=t;this.amount=isNaN(n)?this.amount:n;this.setType(r)}function v(e,t,n,r,i){if(!e.automation){e.automation=[];switch(e.type){case"generator":e.append=v.generatorAppend;break;case"effect":e.append=v.effectAppend;break;case"buffereffect":e.append=v.bufferEffectAppend;break}}n=new d(t,n,r,i);e.automation.push(n);return n}function m(e,t,n){function r(){e.apply(this,n)}this.channelCount=isNaN(t)?this.channelCount:t;this.effects=[];r.prototype=e.prototype;while(t--){this.effects.push(new r)}}function g(e,t){var n=e[0].toUpperCase()+e.substr(1).toLowerCase();g[e]=t;if(t.decode){u.Sampler.prototype["load"+n]=function(t){this.load.apply(this,[g[e].decode(t)].concat([].slice.call(arguments,1)))}}if(t.encode){u.AudioDevice.Recording.prototype["to"+n]=function(t){return g[e].encode({data:this.join(),sampleRate:this.boundTo.sampleRate,channelCount:this.boundTo.channelCount,bytesPerSample:t})}}return t}function y(){}function b(){}function w(e,t){w[e]=t;w._pluginList.push({plugin:t,name:e})}function E(e,t,n,r,i,s,o){this.sampleRate=isNaN(e)?this.sampleRate:e;this.attack=isNaN(t)?this.attack:t;this.decay=isNaN(n)?this.decay:n;this.sustain=isNaN(r)?this.sustain:r;this.release=isNaN(i)?this.release:i;this.sustainTime=isNaN(s)?null:s;this.releaseTime=isNaN(o)?null:o}function S(e,t,n,r){var i=this,s=0;this.sampleRate=isNaN(e)?this.sampleRate:e;this.stepLength=isNaN(t)?this.stepLength:t;this.steps=n||[1,0];this.attack=isNaN(r)?this.attack:r}function x(e,t){this.sampleRate=isNaN(e)?this.sampleRate:e;this.schedule=[];this.reset(t)}function T(e,t,n,r,i,s){this.reset.apply(this,arguments)}function N(e,t){var r=this,i=0;r.sampleRate=e;r.resolution=t?n.pow(2,t-1):n.pow(2,8-1);r.pushSample=function(e){i=n.floor(e*r.resolution+.5)/r.resolution;return i};r.getMix=function(){return i}}function C(e,t,r,i){function l(){o=new a(s.sampleRate*.1);u=0;var e,t=o.length;for(e=0;e<t;e++){o[e]=0}}var s=this,o,u,f;s.delayTime=t||30;s.depth=r||3;s.freq=i||.1;s.sampleRate=e;s.osc=new F(e,i);s.calcCoeff=l;s.pushSample=function(e){if(++u>=o.length){u=0}o[u]=e;s.osc.generate();var t=s.delayTime+s.osc.getMix()*s.depth;t*=s.sampleRate/1e3;t=u-n.floor(t);while(t<0){t+=o.length}f=o[t];return f};s.getMix=function(){return f};l()}function k(e,t,n,r){var i=this;i.sampleRate=e;i.buffer=new a(isNaN(t)?1200:t);i.bufferSize=i.buffer.length;i.feedback=isNaN(n)?i.feedback:n;i.damping=isNaN(r)?i.damping:r;i.invDamping=1-i.damping}function L(e,t,n){var r=this,i=0;r.sampleRate=e;r.scale=t||1;r.gain=isNaN(n)?.5:n;r.pushSample=function(e){e/=r.scale;i=(1+r.gain)*e-r.gain*e*e*e;return i};r.getMix=function(){return i}}function A(e,t){this.sampleRate=isNaN(e)?this.sampleRate:e;this.setParam("kernels",t||new a(1))}function O(e,t,n){var r=this;r.time=isNaN(t)?r.time:t;r.feedback=isNaN(n)?r.feedback:n;r.reset(e)}function M(e){var t=new P(e,720.484),r=new P(e,723.431),i=new P(e,1),s=0;this.gain=4;this.master=1;this.sampleRate=e;this.filters=[t,r,i];this.pushSample=function(e){t.pushSample(e);s=t.getMix(1)*this.gain;s=n.atan(s)+s;if(s>.4){s=.4}else if(s<-.4){s=-.4}r.pushSample(s);i.pushSample(r.getMix(0));s=i.getMix(1)*this.master;return s};this.getMix=function(){return s}}function _(e,t,n,r,i,s,o){var a=this;a.sampleRate=e;a.channelCount=isNaN(t)?a.channelCount:t;a.wet=isNaN(n)?a.wet:n;a.dry=isNaN(r)?a.dry:r;a.roomSize=isNaN(i)?a.roomSize:i;a.damping=isNaN(s)?a.damping:s;a.tuning=new _.Tuning(o||a.tuning);a.sample=function(){var e=[],t;for(t=0;t<a.channelCount;t++){e[t]=0}return e}();a.CFs=function(){var e=[],t=[],n=a.tuning.combCount,r=a.damping*a.tuning.scaleDamping,i=a.roomSize*a.tuning.scaleRoom+a.tuning.offsetRoom,s=a.tuning.combTuning,o,f;for(f=0;f<a.channelCount;f++){for(o=0;o<n;o++){t.push(new u.CombFilter(a.sampleRate,s[o]+f*a.tuning.stereoSpread,i,r))}e.push(t);t=[]}return e}();a.numCFs=a.CFs[0].length;a.APFs=function(){var e=[],t=[],n=a.tuning.allPassCount,r=a.tuning.allPassFeedback,i=a.tuning.allPassTuning,s,o;for(o=0;o<a.channelCount;o++){for(s=0;s<n;s++){t.push(new _.AllPassFilter(a.sampleRate,i[s]+o*a.tuning.stereoSpread,r))}e.push(t);t=[]}return e}();a.numAPFs=a.APFs[0].length}function D(e,t){this.sampleRate=isNaN(e)?this.sampleRate:e;this.gain=isNaN(t)?this.gain:t}function P(e,t,r,i){function d(){u=2*c(n.PI*h(.25,s.cutoff/(s.samplerate*2)));a=h(2*(1-p(s.resonance,.25)),h(2,2/u-u*.5))}var s=this,o=[0,0,0,0],u,a,f,l,c=n.sin,h=n.min,p=n.pow;s.cutoff=isNaN(t)?2e4:t;s.resonance=!r?.1:r;s.samplerate=isNaN(e)?44100:e;s.type=i||0;s.pushSample=function(e){if(f!==s.cutoff||l!==s.resonance){d();f=s.cutoff;l=s.resonance}o[3]=e-a*o[2];o[0]=o[0]+u*o[2];o[1]=o[3]-o[0];o[2]=u*o[1]+o[2];o[3]=e-a*o[2];o[0]=o[0]+u*o[2];o[1]=o[3]-o[0];o[2]=u*o[1]+o[2];return o[s.type]};s.getMix=function(e){return o[e||s.type]}}function H(e,t,n,r){this.sampleRate=isNaN(e)?this.sampleRate:e;this.threshold=isNaN(t)?this.threshold:t;this.attack=isNaN(n)?this.attack:n;this.release=isNaN(r)?this.release:r;this._amplitude=new u.Amplitude(this.sampleRate,this.attack,this.release)}function B(e,t,r){function d(){a=u*i.cutoff/i.samplerate;f=1-a/(2*(i.resonance+.5/(1+a))+a-2);l=f*f;c=l+1-2*n.cos(a)*f}var i=this,s=0,o=0,u=n.PI*2,a,f,l,c,h,p;i.cutoff=!t?2e4:t;i.resonance=!r?1:r;i.samplerate=e;i.pushSample=function(e){if(h!==i.cutoff||p!==i.resonance){d();h=i.cutoff;p=i.resonance}s+=(e-o)*c;o+=s;s*=l;return o};i.getMix=function(){return o};d()}function j(){this.reset.apply(this,arguments)}function F(e,t){var n=this;n.frequency=isNaN(t)?440:t;n.waveTable=new a(1);n.sampleRate=e;n.waveShapes=n.waveShapes.slice(0)}function I(e,t){var n=this;n.voices=[];n.sampleRate=e;n.pitch=isNaN(t)?440:n.pitch}function R(e,t,n){this.sampleRate=isNaN(e)?this.sampleRate:e;this.attack=isNaN(t)?this.attack:t;this.decay=isNaN(n)?this.decay:n}s.list=[];var o=t.Float32Array||i,u=this;u.Float32Array=a;var f=function(){if(r.defineProperty){return r.defineProperty}else if(r.prototype.__defineGetter__){return function(e,t,n){n.get&&e.__defineGetter__(t,n.get);n.set&&e.__defineSetter__(t,n.set)}}}();l(u,"__define",f);l(u,"__defineConst",l);l(u,"__extend",c);l(u,"__enum",h);l(u,"__class",p);d.prototype={parameter:"",automation:null,amount:1,type:"modulation",mode:null,setType:function(e){if(e){if(typeof e==="function"){this.type=e.name||"custom";this.mode=e}this.type=e;this.mode=v.modes[e]}else{this.mode=this.mode||v.modes[this.type]}}};v.generatorAppend=function(e,t,n){var r=this,i=e.length,s=r.automation.length,o=[],u,a,f,l,c;n=n||e;t=t||r.channelCount;for(l=0;l<s;l++){o.push(r[r.automation[l].parameter])}for(a=0,u=0;a<i;a+=t,u++){for(l=0;l<s;l++){r[r.automation[l].parameter]=o[l]}for(l=0;l<s;l++){c=r.automation[l];c.mode(r,c.parameter,c.amount*c.automation.generatedBuffer[u])}r.generate();for(f=0;f<t;f++){n[a+f]=r.getMix(f)*r.mix+e[a+f]}}for(l=0;l<s;l++){r[r.automation[l].parameter]=o[l]}return n};v.effectAppend=function(e,t,n){var r=this,i=e.length,s=r.automation.length,o=[],u,a,f,l,c;n=n||e;t=t||r.channelCount;for(l=0;l<s;l++){o.push(r[r.automation[l].parameter])}for(a=0,u=0;a<i;a+=t,u++){for(l=0;l<s;l++){r[r.automation[l].parameter]=o[l]}for(l=0;l<s;l++){c=r.automation[l];c.mode(r,c.parameter,c.amount*c.automation.generatedBuffer[u])}for(f=0;f<t;f++){r.pushSample(e[a+f],f);n[a+f]=r.getMix(f)*r.mix+e[a+f]*(1-r.mix)}}for(l=0;l<s;l++){r[r.automation[l].parameter]=o[l]}return n};v.bufferEffectAppend=function(e,t,n){var r=this,i=t||r.channelCount,s=e.length,o=r.automation.length,u=[],a,f,l,c,h,p;n=n||e;for(l=0;l<o;l++){u.push([]);for(f=0;f<i;f++){u[l].push(r.effects[f][r.automation[l].parameter])}}for(p=0,a=0;a<s;a+=i,p++){for(f=0;f<i;f++){for(l=0;l<o;l++){h=r.automation[l];r.effects[f][h.parameter]=u[l][f];h.mode(r.effects[f],h.parameter,h.amount*h.automation.generatedBuffer[p])}n[a+f]=r.effects[f].pushSample(e[a+f])*r.mix+e[a+f]*(1-r.mix)}}for(l=0;l<o;l++){for(f=0;f<i;f++){r.effects[f][r.automation[l].parameter]=u[l][f]}}return n};v.modes={modulation:function(e,t,n){e.setParam(t,e[t]*n)},addition:function(e,t,n){e.setParam(t,e[t]+n)},subtraction:function(e,t,n){e.setParam(t,e[t]-n)},additiveModulation:function(e,t,n){e.setParam(t,e[t]+e[t]*n)},subtractiveModulation:function(e,t,n){e.setParam(t,e[t]-e[t]*n)},assignment:function(e,t,n){e.setParam(t,n)},absoluteAssignment:function(e,t,r){e.setParam(t,n.abs(r))}};v.__constructror=d;s(function(){u.BufferEffect.prototype.addAutomation=u.EffectClass.prototype.addAutomation=u.GeneratorClass.prototype.addAutomation=function(){return u.Automation.apply(u,[this].concat([].slice.call(arguments)))}});m.prototype={mix:.5,type:"buffereffect",channelCount:2,append:function(e,t,n){var r=this,i=e.length,s,o;t=t||r.channelCount;n=n||e;for(s=0;s<i;s+=t){for(o=0;o<t;o++){r.effects[o].pushSample(e[s+o],0);n[s+o]=r.effects[o].getMix(0)*r.mix+e[s+o]*(1-r.mix)}}return n},addPreProcessing:function(){var e;for(e=0;e<this.effects.length;e++){this.effects[e].addPreProcessing.apply(this.effects[e],arguments)}},removePreProcessing:function(){var e;for(e=0;e<this.effects.length;e++){this.effects[e].removePreProcessing.apply(this.effects[e],arguments)}},setParam:function(e,t){var n=this.effects.length,r;for(r=0;r<n;r++){this.effects[r].setParam(e,t)}}};s(function(){u.EffectClass.createBufferBased=function(t){return new u.BufferEffect(this,t,[].slice.call(arguments,1))}});y.prototype={type:"effect",sink:true,source:true,mix:.5,channelCount:1,append:function(e,t,n){var r=e.length,i,s;n=n||e;t=t||this.channelCount;for(i=0;i<r;i+=t){for(s=0;s<t;s++){this.pushSample(e[i+s],s);n[i+s]=this.getMix(s)*this.mix+e[i+s]*(1-this.mix)}}return n},addPreProcessing:function(e){e.pushSample=this.pushSample;this.pushSample=function(){e.apply(this,arguments);return e.pushSample.apply(this,arguments)}},removePreProcessing:function(e){var t;while(t=this.pushSample.pushSample){if(t===e||!e){this.pushSample=t;e.pushSample=null}}},setParam:function(e,t){this[e]=t},pushSample:function(){},getMix:function(){},reset:function(){}};s(function(){function e(e,t,n,r){var s,o,a,f,l;if(!t){t=[]}else if(!r&&!(t instanceof i)&&typeof t==="object"){r=t;t=[]}r=r||{};n=n||4096;if(typeof n==="number"){s=new Float64Array(n)}else{s=n;n=s.length}f=this.apply(u,t);for(l in r){if(r.hasOwnProperty(l)){f.setParam(l,r[l])}}a=u.FFT(f.sampleRate||44100,n/2,false);o=new Float64Array(n/2);if(e)e(o);f.append(o,1);a._process(s,o,"real");return s}y.getFrequencyResponse=function(t,n,r){return e.call(this,function(e){e[0]=e.length/2},t,n,r)};b.getFrequencyResponse=function(t,n,r){return e.call(this,null,t,n,r)}});b.prototype={type:"generator",source:true,mix:1,generatedBuffer:null,channelCount:1,append:function(e,t,n){var r=e.length,i,s;n=n||e;t=t||this.channelCount;for(i=0;i<r;i+=t){this.generate();for(s=0;s<t;s++){n[i+s]=this.getMix(s)*this.mix+e[i+s]}}return n},addPreProcessing:function(e){e.generate=this.generate;this.generate=function(){e.apply(this,arguments);return e.generate.apply(this,arguments)}},removePreProcessing:function(e){var t;while(t=this.generate.generate){if(t===e||!e){this.generate=t;e.generate=null}}},generateBuffer:function(e,t){this.generatedBuffer=new a(e);this.append(this.generatedBuffer,t||1)},setParam:function(e,t){this[e]=t},generate:function(){},getMix:function(){},reset:function(){}};l(w,"_pluginList",[],false);E.prototype={sampleRate:44100,attack:50,decay:50,sustain:1,release:50,sustainTime:null,releaseTime:null,gate:false,state:3,value:0,_st:0,generate:function(){this.states[this.state].call(this);return this.value},getMix:function(){return this.value},triggerGate:function(e){e=typeof e==="undefined"?!this.gate:e;this.gate=e;this.state=e?0:this.releaseTime===null?3:5;this._st=0},states:[function(){this.value+=1e3/this.sampleRate/this.attack;if(this.value>=1){this.state=1}},function(){this.value-=1e3/this.sampleRate/this.decay*this.sustain;if(this.value<=this.sustain){if(this.sustainTime===null){this.state=2}else{this._st=0;this.state=4}}},function(){this.value=this.sustain},function(){this.value=n.max(0,this.value-1e3/this.sampleRate/this.release)},function(){this.value=this.sustain;if(this._st++>=this.sampleRate*.001*this.sustainTime){this._st=0;this.state=this.releaseTime===null?3:5}},function(){this.value=n.max(0,this.value-1e3/this.sampleRate/this.release);if(this._st++>=this.sampleRate*.001*this.releaseTime){this._st=0;this.state=0}}]};S.prototype={sampleRate:44100,stepLength:200,steps:null,attack:0,phase:0,value:0,generate:function(){var e=this,t=e.sampleRate/1e3*e.stepLength,n=e.steps,r=t*n.length,i,s,o,u,a;e.phase=(e.phase+1)%r;i=e.phase/r*n.length;s=i%1;i=~~i;o=(i||n.length)-1;u=n[i]-n[o];a=n[i];if(s<e.attack){a-=u-u/e.attack*s}e.value=a;return a},getMix:function(){return this.value},triggerGate:function(){this.phase=0}};x.prototype={sampleRate:44100,value:1,schedule:null,clock:0,getMix:function(){return this.value},generate:function(){var e;for(e=0;e<this.schedule.length;e++){if(this.schedule[e].t--){this.value=this.schedule[e].v;this.schedule.splice(e--,1)}}},setValue:function(e){this.schedule.push({v:e,t:~~((+(new Date)-this.clock)/1e3*this.sampleRate)})},reset:function(e){this.value=isNaN(e)?this.value:e;this.clock=+(new Date)}};T.BiquadFilterClass=function z(){var e;for(e in z.prototype){if(z.prototype.hasOwnProperty){this[e]=this[e]}}};T.BiquadFilterClass.prototype={sampleRate:44100,sample:0,inputs:null,outputs:null,coefs:null,pushSample:function(e){var t=this.coefs,n=this.inputs,r=this.outputs;this.sample=t.b0*e+t.b1*n[0]+t.b2*n[1]-t.a1*r[0]-t.a2*r[1];n.pop();n.unshift(e);r.pop();r.unshift(this.sample);return this.sample},getMix:function(){return this.sample},reset:function(e,t,n,r,i,s){this.inputs=[0,0];this.outputs=[0,0];this.sampleRate=isNaN(e)?this.sampleRate:e;if(arguments.length>1){this.coefs={b0:t,b1:n,b2:r,a1:i,a2:s}}}};T.LowPass=function(e,t,r){var i=2*n.PI*t/e,s=n.cos(i),o=n.sin(i),u=o/(2*r),a=(1-s)/2,f=1-s,l=a,c=1+u,h=-2*s,p=1-u;this.reset(e,a/c,f/c,l/c,h/c,p/c)};T.HighPass=function(e,t,r){var i=2*n.PI*t/e,s=n.cos(i),o=n.sin(i),u=o/(2*r),a=(1+s)/2,f=-(1+s),l=a,c=1+u,h=-2*s,p=1-u;this.reset(e,a/c,f/c,l/c,h/c,p/c)};T.AllPass=function(e,t,r){var i=2*n.PI*t/e,s=n.cos(i),o=n.sin(i),u=o/(2*r),a=1-u,f=-2*s,l=1+u,c=l,h=f,p=a;this.reset(e,a/c,f/c,l/c,h/c,p/c)};T.BandPass=function(e,t,r){var i=2*n.PI*t/e,s=n.cos(i),o=n.sin(i),u=n.log(2)/2*r*i/o,a=o*(n.exp(u)-n.exp(-u))/2,f=a,l=0,c=-a,h=1+a,p=-2*s,d=1-a;this.reset(e,f/h,l/h,c/h,p/h,d/h)};(function(e,t){for(t=0;t<e.length;t++){e[t].prototype=new T.BiquadFilterClass}})([T,T.LowPass,T.HighPass,T.AllPass,T.BandPass]);k.prototype={sample:0,index:0,store:0,feedback:.84,damping:.2,pushSample:function(e){var t=this;t.sample=t.buffer[t.index];t.store=t.sample*t.invDamping+t.store*t.damping;t.buffer[t.index++]=e+t.store*t.feedback;if(t.index>=t.bufferSize){t.index=0}return t.sample},getMix:function(){return this.sample},reset:function(){this.index=this.store=0;this.samples=0;this.buffer=new a(this.bufferSize)},setParam:function(e,t){switch(e){case"damping":this.damping=t;this.invDamping=1-t;break;default:this[e]=t;break}}};A.prototype={sampleRate:44100,sample:0,pos:0,kernels:null,buffer:null,pushSample:function(e){var t,n,r;this.sample=0;this.buffer[this.pos]=e;for(n=0,r=this.buffer.length,t=this.pos+r;n<r;n++){this.sample+=this.kernels[n]*this.buffer[(t-n)%r]}this.pos=(this.pos+1)%this.buffer.length},getMix:function(){return this.sample},setParam:function(e,t){switch(e){case"kernels":this.buffer=new a(t.length);this.pos=0;break}this[e]=t}};O.prototype={sampleRate:1,time:1e3,feedback:0,bufferPos:0,buffer:null,sample:0,_rstf:1,pushSample:function(e){var t=this,n=t.buffer;n[t.bufferPos++]+=e;if(t.bufferPos>t.time*t._rstf){t.bufferPos=0}t.sample=n[t.bufferPos];n[t.bufferPos]*=t.feedback;return t.sample},getMix:function(){return this.sample},resample:function(e){var t=this,r=t.time/e;t.buffer=u.Sink.resample(t.buffer,e);t.time=e;t.bufferPos=n.round(r*t.bufferPos);return t.buffer},reset:function(e,t){var r=this,i=r.buffer,s,o;e=isNaN(e)?r.sampleRate:e;o=r.sampleRate/e;r.buffer=new a(e*O.MAX_DELAY);r.bufferPos=n.round(o*r.bufferPos);r._rstf=1/1e3*e;if(t){i=u.Sink.resample(i,o);for(s=0;s<i.length&&s<r.buffer.length;s++){r.buffer[s]=i[s]}}return r.buffer}};O.MAX_DELAY=2;_.prototype={channelCount:2,sample:[0,0],wet:.5,dry:.55,damping:.2223,roomSize:.5,tuning:{},pushSample:function(e,t){var n=e*this.tuning.fixedGain,r=0,i;for(i=0;i<this.numCFs;i++){r+=this.CFs[t][i].pushSample(n)}for(i=0;i<this.numAPFs;i++){r=this.APFs[t][i].pushSample(r)}this.sample[t]=r*this.wet+e*this.dry},getMix:function(e){return this.sample[e]},reset:function(){var e,t;for(t=0;t<this.channelCount;t++){for(e=0;e<this.numCFs;e++){this.CFs[t][e].reset()}for(e=0;e<this.numAPFs;e++){this.APFs[t][e].reset()}this.sample[t]=0}},setParam:function(e,t){var n,r,i,s;switch(e){case"roomSize":this.roomSize=t;n=this.roomSize*this.tuning.scaleRoom+this.tuning.offsetRoom;for(s=0;s<this.channelCount;s++){for(i=0;i<this.numCFs;i++){this.CFs[s][i].setParam("feedback",n)}}break;case"damping":this.damping=t;r=this.damping*this.tuning.scaleDamping;for(s=0;s<this.channelCount;s++){for(i=0;i<this.numCFs;i++){this.CFs[s][i].setParam("damping",r)}}break;default:this[e]=t}}};_.Tuning=function(t){var n;if(t){for(n in t){if(t.hasOwnProperty(n)){this[n]=t[n]}}}};_.Tuning.prototype={combCount:8,combTuning:[1116,1188,1277,1356,1422,1491,1557,1617],allPassCount:4,allPassTuning:[556,441,341,225],allPassFeedback:.5,fixedGain:.015,scaleDamping:.9,scaleRoom:.28,offsetRoom:.7,stereoSpread:23};_.AllPassFilter=function(t,n,r){var i=this;i.sampleRate=t;i.buffer=new a(isNaN(n)?500:n);i.bufferSize=i.buffer.length;i.feedback=isNaN(r)?i.feedback:r};_.AllPassFilter.prototype={sample:0,index:0,feedback:.5,pushSample:function(e){var t=this;bufOut=t.buffer[t.index];t.sample=-e+bufOut;t.buffer[t.index++]=e+bufOut*t.feedback;if(t.index>=t.bufferSize){t.index=0}return t.sample},getMix:function(){return this.sample},reset:function(){this.index=0;this.sample=0;this.buffer=new a(this.bufferSize)}};D.prototype={sampleRate:44100,gain:1,sample:0,pushSample:function(e){this.sample=e*this.gain;return this.sample},getMix:function(){return this.sample}};H.prototype={sampleRate:44100,threshold:.95,attack:.01,release:.01,__amplitude:null,sample:0,pushSample:function(e){var t=this._amplitude.pushSample(e)-this.threshold;this.sample=t>0?e/(1+t):e;return this.sample},getMix:function(){return this.sample},setParam:function(e,t){switch(e){case"attack":case"release":this._amplitude[e]=t;this[e]=t;break;default:this[e]=t}}};j.prototype={sampleRate:44100,color:"white",b0:0,b1:0,b2:0,b3:0,b4:0,b5:0,c1:null,c2:null,c3:null,c4:null,q:15,q0:null,q1:null,brownQ:0,value:0,reset:function(e,t){this.sampleRate=isNaN(e)?this.sampleRate:e;this.color=typeof t==="string"?t:this.color;this.c1=(1<<this.q)-1;this.c2=~~(this.c1/3)+1;this.c3=1/this.c1;this.c1=this.c2*6;this.c4=3*(this.c2-1);this.q0=n.exp(-200*n.PI/this.sampleRate);this.q1=1-this.q0},generate:function(){this.value=this[this.color]()},getMix:function(){return this.value},white:function(){var e=n.random();return(e*this.c1-this.c4)*this.c3},pink:function(){var e=this.white();this.b0=.997*this.b0+.029591*e;this.b1=.985*this.b1+.032534*e;this.b2=.95*this.b2+.048056*e;this.b3=.85*this.b3+.090579*e;this.b4=.62*this.b4+.10899*e;this.b5=.25*this.b5+.255784*e;return.55*(this.b0+this.b1+this.b2+this.b3+this.b4+this.b5)},brown:function(){var e=this.white();this.brownQ=this.q1*e+this.q0*this.brownQ;return 6.2*this.brownQ}};(function(e,t,r,i){r=F.prototype={sampleRate:44100,frequency:440,phaseOffset:0,pulseWidth:.5,fm:0,waveShape:"sine",phase:0,_p:0,generate:function(){var e=this,t=+e.frequency,n=e.pulseWidth,r=e.phase;t+=t*e.fm;e.phase=(r+t/e.sampleRate/2)%1;r=(e.phase+e.phaseOffset)%1;e._p=r<n?r/n:(r-n)/(1-n)},getMix:function(){return this[this.waveShape]()},getPhase:function(){return this._p},reset:function(e){this.phase=this._p=isNaN(e)?0:e},setWavetable:function(e){this.waveTable=e;return true},sine:function(){return n.sin(this._p*e)},triangle:function(){return this._p<.5?4*this._p-1:3-4*this._p},square:function(){return this._p<.5?-1:1},sawtooth:function(){return 1-this._p*2},invSawtooth:function(){return this._p*2-1},pulse:function(){return this._p<.5?this._p<.25?this._p*8-1:1-(this._p-.25)*8:-1},wavetable:function(){return u.Sink.interpolate(this.waveTable,this._p*this.waveTable.length)},waveShapes:[]};for(i=0;i<t.length;i++){r[i]=r[t[i]];r.waveShapes.push(r[i])}F.WaveShape=function(e,t){if(t){this.prototype[e]=t}return this.prototype[e]};F.createMixWave=function(e,t){var n=t.length,r,i;return this.WaveShape(e,function(){r=0;for(i=0;i<n;i++){r+=this[t[i].shape]()*t[i].mix}return r})}})(n.PI*2,["sine","triangle","pulse","sawtooth","invSawtooth","square"]);I.prototype={sampleRate:44100,pitch:440,delayStart:0,delayEnd:0,maxVoices:1/0,sampleSize:0,voices:null,sample:null,samples:null,data:null,noteOn:function(e,t){e=isNaN(e)?this.pitch:e;var n=this,r=e/n.pitch,i=n.sampleRate,s=i*n.delayStart,o=n.sampleSize-i*n.delayEnd-1,u={f:e,p:s,s:r,l:o,v:isNaN(t)?1:t};n.voices.push(u);while(n.voices.length>n.maxVoices){o=n.voices.shift();if(o.onend)o.onend()}return u},generate:function(){var e=this.voices,t,n;for(t=0;t<e.length;t++){n=e[t];n.p+=n.s;if(n.p>n.l&&e.splice(t--,1)&&n.onend){n.onend()}}},getMix:function(e){var t=this.voices,n=0,r;e=e||0;if(this.samples[e]){for(r=0;r<t.length;r++){n+=u.Sink.interpolate(this.samples[e],t[r].p)*t[r].v}}return n},load:function(e,t){var n=this,r=n.samples=u.Sink.deinterleave(e.data,e.channelCount),i;if(t){for(i=0;i<r.length;i++){r[i]=u.Sink.resample(r[i],e.sampleRate,n.sampleRate)}}n.sample=e.data;n.samples=r;n.data=e;n.sampleSize=r[0].length}};(function(){function t(){var e=arguments,t=e.length,n,r;for(r=0;r<t;r++){n=e[r];this.postMessage({type:"injection",code:n instanceof Function?"("+String(n)+").call(this);":n})}}u.AudioWorker=function(n,r){var i="var audioLib=("+String(e)+").call({},this,Math,Object,Array);\n",s;for(s=0;s<u.plugins._pluginList.length;s++){i+="("+String(u.plugins._pluginList[url])+"());\n"}if(r){i+='this.addEventListener("message",function(e){e.data&&e.data.type==="injection"&&Function(e.data.code).call(this)},true);\n'}i+=n instanceof Function?"("+String(n)+").call(this);":n.textContent||n;i=q.inlineWorker(i);if(r){i.inject=t}return i}})();(function(e,t){function s(e,t){return t?n(e&255)+s(e>>8,t-1):""}function o(e,t){return t?o(e>>8,t-1)+n(255-e&255):""}function u(e,t,n){return n?o(e,t):s(e,t)}function a(e,n){var r=e.length,i=r-1,s=0,o=t.pow,u;if(n){for(u=0;u<r;u++){s+=(255-e.charCodeAt(u))*o(256,i-u)}}else{for(u=0;u<r;u++){s+=e.charCodeAt(u)*o(256,u)}}return s}function f(e,n,r,i){var s=t.pow,o=t.floor,u=f.convertFromBinary,a=f.convertToBinary,l=e/8,c=s(2,e),h=c/2,p=h-1,d=1/h,v=1/p;return i?r?n?function(e,t){e=o(e<0?e*h+c:e*p);return a(e,l,t)}:function(e,t){return a(o(e*p),l,t)}:n?function(e,t){return a(e<0?e+c:e,l,t)}:function(e,t){return a(e,l,t)}:r?n?function(e,t){var n=u(e,t);return n>p?(n-c)*d:n*v}:function(e,t){return u(e,t)*v}:n?function(e,t){var n=u(e,t);return n>p?n-c:n}:function(e,t){return u(e,t)}}var n=String.fromCharCode,r=true,i=false;f.convertToBinary=u;f.convertFromBinary=a;f.fromQ32=f(32,r,r,r);f.toQ32=f(32,r,r,i);f.fromQ24=f(24,r,r,r);f.toQ24=f(24,r,r,i);f.fromQ16=f(16,r,r,r);f.toQ16=f(16,r,r,i);f.fromQ8=f(8,r,r,r);f.toQ8=f(8,r,r,i);f.fromInt32=f(32,r,i,r);f.toInt32=f(32,r,i,i);f.fromInt16=f(16,r,i,r);f.toInt16=f(16,r,i,i);f.fromInt8=f(8,r,i,r);f.toInt8=f(8,r,i,i);f.fromUint32=f(32,i,i,r);f.toUint32=f(32,i,i,i);f.fromUint16=f(16,i,i,r);f.toUint16=f(16,i,i,i);f.fromUint8=f(8,i,i,r);f.toUint8=f(8,i,i,i);e.Binary=f})(this,n);(function(e,t){function n(e){this.data=e}function o(e,t,n){var i=t/8;r["read"+e+t]=function(e){return n(this.read(i),e)}}var r=n.prototype={read:function(e){var t=this,n=t.data.substr(0,e);t.skip(e);return n},skip:function(e){var t=this,n=t.data=t.data.substr(e);t.pointer+=e;return n.length},readBuffer:function(e,t,n){var r=this,i="read"+n+t,s=t/8,o=e.length,u=0;while(r.data&&u<o){e[u++]=r[i]()}return u}},i,s;for(i in t){s=/to([a-z]+)([0-9]+)/i.exec(i);if(s)o(s[1],s[2],t[i])}e.Stream=n;n.newType=o})(this,this.Binary);this.PCMData=function(e,t){function s(e){return(typeof e==="string"?s.decode:s.encode)(e)}var r=typeof Uint8Array==="undefined"?i:Uint8Array;s.decodeFrame=function(e,n,i){if(n===8){var s=new r(i.length);(new t(e)).readBuffer(s,8,"Uint");for(n=0;n<i.length;n++){i[n]=(s[n]-127.5)*127.5}}else{(new t(e)).readBuffer(i,n,"Q")}return i};s.encodeFrame=function(t,n){var r=e[(n===8?"fromUint":"fromQ")+n],i=t.length,s="",o;if(n===8){for(o=0;o<i;o++){s+=r(t[o]*127.5+127.5)}}else{for(o=0;o<i;o++){s+=r(t[o])}}return s};s.decode=function(e,n){function L(){b=r.read(4);w=r.readUint32();S=r.read(w);T=C[b]=C[b]||[];if(b==="data"){E=~~(w/g);x=k.data=new a(E);s.decodeFrame(S,g*8,x)}else{T.push(S)}if(!n)return;if(r.data){setTimeout(L,1)}else{n(k)}}var r=new t(e),i=r.read(4),o=r.readUint32();r=new t(r.read(o));var u=r.read(4),f=r.read(4),l=r.readUint32(),c=new t(r.read(l)),h=c.readUint16(),p=c.readUint16(),d=c.readUint32(),v=c.readUint32(),m=c.readUint16(),g=m/p,y=c.readUint16(),b,w,E,S,x,T,N,C={},k={channelCount:p,bytesPerSample:m/p,sampleRate:v/m,chunks:C,data:x};if(n){if(r.data){L()}else{n(k)}}else{while(r.data){L()}}return k};s.encode=function(t,r){var i=e.fromUint32,o=e.fromUint16,u=t.data,a=t.sampleRate,f=t.channelCount||1,l=t.bytesPerSample||1,c=l*8,h=f*l,p=a*h,d=u.length,v=d*l,m=n.pow(2,c-1)-1,g=[],y="",b,w,E,S;g.push("fmt "+i(16)+o(1)+o(f)+i(a)+i(p)+o(h)+o(c));g.push("data"+i(v)+s.encodeFrame(u,c));S=t.chunks;if(S){for(w in S){if(S.hasOwnProperty(w)){b=S[w];for(E=0;E<b.length;E++){y=b[E];g.push(w+i(y.length)+y)}}}}g=g.join("");g="RIFF"+i(g.length)+"WAVE"+g;if(r)setTimeout(function(){r(g)},1);return g};return s}(this.Binary,this.Stream);var q=this.Sink=function(e){function t(e,n,r,i){var s=t.sinks.list,o;for(o=0;o<s.length;o++){if(s[o].enabled){try{return new s[o](e,n,r,i)}catch(u){}}}throw t.Error(2)}function n(){}function r(e,n,i,s,o){i=i||n.prototype;n.prototype=new t.SinkClass;n.prototype.type=e;n.enabled=!s;var u;for(u in i){if(i.hasOwnProperty(u)){n.prototype[u]=i[u]}}r[e]=n;r.list[o?"unshift":"push"](n)}t.SinkClass=n;n.prototype=t.prototype={sampleRate:44100,channelCount:2,bufferSize:4096,writePosition:0,previousHit:0,ringOffset:0,channelMode:"interleaved",isReady:false,start:function(e,n,r,i){this.channelCount=isNaN(n)||n===null?this.channelCount:n;this.bufferSize=isNaN(r)||r===null?this.bufferSize:r;this.sampleRate=isNaN(i)||i===null?this.sampleRate:i;this.readFn=e;this.activeRecordings=[];this.previousHit=+(new Date);t.EventEmitter.call(this);t.emit("init",[this].concat([].slice.call(arguments)))},process:function(e,n){this.emit("preprocess",arguments);if(this.ringBuffer){(this.channelMode==="interleaved"?this.ringSpin:this.ringSpinInterleaved).apply(this,arguments)}if(this.channelMode==="interleaved"){this.emit("audioprocess",arguments);if(this.readFn){this.readFn.apply(this,arguments)}}else{var r=t.deinterleave(e,this.channelCount),i=[r].concat([].slice.call(arguments,1));this.emit("audioprocess",i);if(this.readFn){this.readFn.apply(this,i)}t.interleave(r,this.channelCount,e)}this.emit("postprocess",arguments);this.previousHit=+(new Date);this.writePosition+=e.length/n},getPlaybackTime:function(){return this.writePosition-this.bufferSize},ready:function(){if(this.isReady)return;this.isReady=true;this.emit("ready",[])}};t.sinks=t.devices=r;t.sinks.list=[];t.singleton=function(){var e=t.apply(null,arguments);t.singleton=function(){return e};return e};e.Sink=t;return t}(function(){return this}());void function(e){function t(){var e;for(e in t.prototype){if(t.prototype.hasOwnProperty(e)){this[e]=t.prototype[e]}}this._listeners={}}t.prototype={_listeners:null,emit:function(e,t){if(this._listeners[e]){for(var n=0;n<this._listeners[e].length;n++){this._listeners[e][n].apply(this,t)}}return this},on:function(e,t){this._listeners[e]=this._listeners[e]||[];this._listeners[e].push(t);return this},off:function(e,t){if(this._listeners[e]){if(!t){delete this._listeners[e];return this}for(var n=0;n<this._listeners[e].length;n++){if(this._listeners[e][n]===t){this._listeners[e].splice(n--,1)}}if(!this._listeners[e].length){delete this._listeners[e]}}return this}};e.EventEmitter=t;t.call(e)}(this.Sink);void function(e){function t(e){if(!t.hasOwnProperty(e))throw t(1);if(!(this instanceof t))return new t(e);var n;for(n in t[e]){if(t[e].hasOwnProperty(n)){this[n]=t[e][n]}}this.code=e}t.prototype=new Error;t.prototype.toString=function(){return"SinkError 0x"+this.code.toString(16)+": "+this.message};t[1]={message:"No such error code.",explanation:"The error code does not exist."};t[2]={message:"No audio sink available.",explanation:"The audio device may be busy, or no supported output API is available for this browser."};t[16]={message:"Buffer underflow.",explanation:"Trying to recover..."};t[17]={message:"Critical recovery fail.",explanation:"The buffer underflow has reached a critical point, trying to recover, but will probably fail anyway."};t[18]={message:"Buffer size too large.",explanation:"Unable to allocate the buffer due to excessive length, please try a smaller buffer. Buffer size should probably be smaller than the sample rate."};e.Error=t}(this.Sink);void function(e){var t,n,r,i;void function(e,s){function o(e,t){var n,r=t.slice();for(n=r.shift();typeof n!=="undefined";n=r.shift()){n=Function("return typeof "+n+e+'=== "undefined" ? undefined : '+n+e)();if(n)return n}}t=o("Blob",e);n=o("BlobBuilder",e);r=o("URL",s);i=o("btoa",[""])}(["","Moz","WebKit","MS"],["","webkit"]);var s=t&&r&&function(e,n){return r.createObjectURL(new t([e],{type:n}))};var o=n&&r&&function(e,t){var i=new n;i.append(e);return r.createObjectURL(i.getBlob(t))};var u=i&&function(e,t){return"data:"+t+";base64,"+i(e)};var a=s||o||u;if(!a)return;if(s)a.createBlob=s;if(o)a.createBlobBuilder=o;if(u)a.createData=u;if(t)a.Blob=t;if(n)a.BlobBuilder=n;if(r)a.URL=r;e.createDynURL=a;e.revokeDynURL=function(e){if(typeof e==="string"&&e.indexOf("data:")===0){return false}else{return r.revokeObjectURL(e)}}}(this.Sink);void function(e){function n(){t(this,"terminate",this._terminate);e.revokeDynURL(this._url);delete this._url;delete this._terminate;return this.terminate()}function i(r){function s(e,r,s){try{var o=e(r,"text/javascript");var u=new Worker(o);t(u,"_url",o);t(u,"_terminate",u.terminate);t(u,"terminate",n);if(i.type)return u;i.type=s;i.createURL=e;return u}catch(a){return null}}var o=e.createDynURL;if(!o)return null;var u;if(i.createURL){return s(i.createURL,r,i.type)}u=s(o.createBlob,r,"blob");if(u)return u;u=s(o.createBlobBuilder,r,"blobbuilder");if(u)return u;u=s(o.createData,r,"data");return u}var t=r.defineProperty?function(e,t,n){r.defineProperty(e,t,{value:n,configurable:true,writable:true})}:function(e,t,n){e[t]=n};e.EventEmitter.call(i);i.test=function(){function n(t){if(i.ready)return;i.ready=true;i.working=t;i.emit("ready",[t]);i.off("ready");if(t&&e){e.terminate()}e=null}i.ready=i.working=false;i.type="";i.createURL=null;var e=i("this.onmessage=function(e){postMessage(e.data)}");var t="inlineWorker";if(!e){setTimeout(function(){n(false)},0)}else{e.onmessage=function(e){n(e.data===t)};e.postMessage(t);setTimeout(function(){n(false)},1e3)}};e.inlineWorker=i;i.test()}(this.Sink);void function(e){e.doInterval=function(t,n){function s(s){if(e.inlineWorker.working&&!s){r=e.inlineWorker('setInterval(function (){ postMessage("tic"); }, '+n+");");r.onmessage=function(){t()};i=function(){r.terminate()}}else{r=setInterval(t,n);i=function(){clearInterval(r)}}}var r,i;if(e.inlineWorker.ready){s()}else{e.inlineWorker.on("ready",function(){s()})}return function(){if(!i){if(!e.inlineWorker.ready){e.inlineWorker.on("ready",function(){if(i)i()})}}else{i()}}}}(this.Sink);void function(e){e.sinks("audiodata",function(){function h(){if(r){s=i.mozWriteAudio(r);n+=s;if(s<r.length){r=r.subarray(s);return r}r=null}o=i.mozCurrentSampleOffset();u=Number(o+(l!==o?t.bufferSize:t.preBufferSize)*t.channelCount-n);if(o===l){t.emit("error",[e.Error(16)])}if(u>0||l===o){t.ready();try{f=new a(l===o?t.preBufferSize*t.channelCount:t.forceBufferSize?u<t.bufferSize*2?t.bufferSize*2:u:u)}catch(c){t.emit("error",[e.Error(18)]);t.kill();return}t.process(f,t.channelCount);s=t._audio.mozWriteAudio(f);if(s<f.length){r=f.subarray(s)}n+=s}l=o}var t=this,n=0,r=null,i=new Audio,s,o,u,f,l,c;t.start.apply(t,arguments);t.preBufferSize=isNaN(arguments[4])||arguments[4]===null?this.preBufferSize:arguments[4];i.mozSetup(t.channelCount,t.sampleRate);this._timers=[];this._timers.push(e.doInterval(function(){if(+(new Date)-t.previousHit>2e3){t._audio=i=new Audio;i.mozSetup(t.channelCount,t.sampleRate);n=0;t.emit("error",[e.Error(17)])}},1e3));this._timers.push(e.doInterval(h,t.interval));t._bufferFill=h;t._audio=i},{bufferSize:24576,preBufferSize:24576,forceBufferSize:false,interval:100,kill:function(){while(this._timers.length){this._timers.shift()()}this.emit("kill")},getPlaybackTime:function(){return this._audio.mozCurrentSampleOffset()/this.channelCount}},false,true);e.sinks.moz=e.sinks.audiodata}(this.Sink);(function(e,t){function n(e){var t=document.createElement("audio");if(e){t.src=e}return t}function r(){var e=this;e.currentFrame=n();e.nextFrame=n();e._onended=function(){e.samples+=e.bufferSize;e.nextClip()}}t=e.sinks;t("wav",function(){function l(){if(r._audio.hasNextFrame)return;r.ready();e.memcpy(f,0,o,0);r.process(o,r.channelCount);r._audio.setSource("data:audio/wav;base64,"+btoa(u.PCMData.encode({data:o,sampleRate:r.sampleRate,channelCount:r.channelCount,bytesPerSample:r.quality})));if(!r._audio.currentFrame.src)r._audio.nextClip()}var r=this,i=new t.wav.wavAudio,s=typeof s==="undefined"?u.PCMData:s;r.start.apply(r,arguments);var o=new a(r.bufferSize*r.channelCount),f=new a(r.bufferSize*r.channelCount);if(!n().canPlayType("audio/wav; codecs=1")||!btoa)throw 0;r.kill=e.doInterval(l,40);r._bufferFill=l;r._audio=i},{quality:1,bufferSize:22050,getPlaybackTime:function(){var e=this._audio;return(e.currentFrame?e.currentFrame.currentTime*this.sampleRate:0)+e.samples}});r.prototype={samples:0,nextFrame:null,currentFrame:null,_onended:null,hasNextFrame:false,nextClip:function(){var e=this.currentFrame;this.currentFrame=this.nextFrame;this.nextFrame=e;this.hasNextFrame=false;this.currentFrame.play()},setSource:function(e){this.nextFrame.src=e;this.nextFrame.addEventListener("ended",this._onended,true);this.hasNextFrame=true}};t.wav.wavAudio=r})(this.Sink);void function(e){var t;try{t=require("cubeb")}catch(n){return}var r=function(){var e;return function(){e=new t.Context("sink.js "+process.pid+" "+new Date);r=function(){return e};return e}}();var i=0;e.sinks("cubeb",function(){var e=this;e.start.apply(e,arguments);e._ctx=r();e._stream=new t.Stream(e._ctx,e._ctx.name+" "+i++,t.SAMPLE_FLOAT32LE,e.channelCount,e.sampleRate,e.bufferSize,e._latency,function(t){var n=new Buffer(4*t*e.channelCount);var r=new a(n);e.process(r,e.channelCount);e._stream.write(n);e._stream.release()},function(e){});e._stream.start()},{_ctx:null,_stream:null,_latency:250,bufferSize:4096,kill:function(){this._stream.stop();this.emit("kill")}})}(this.Sink);void function(e){e.sinks("dummy",function(){function n(){var e=new a(t.bufferSize*t.channelCount);t.process(e,t.channelCount)}var t=this;t.start.apply(t,arguments);t._kill=e.doInterval(n,t.bufferSize/t.sampleRate*1e3);t._callback=n},{kill:function(){this._kill();this.emit("kill")}},true)}(this.Sink);(function(e,t){var n=typeof window==="undefined"?null:window.webkitAudioContext||window.AudioContext;e("webaudio",function(n,r,s,o){function p(e){var t=e.outputBuffer,n=t.numberOfChannels,r,s,o=t.length,f=t.size,l=new i(n),p;u.ready();c=c&&c.length===o*n?c:new a(o*n);h=h&&h.length===c.length?h:new a(o*n);c.set(h);for(r=0;r<n;r++){l[r]=t.getChannelData(r)}u.process(c,u.channelCount);for(r=0;r<o;r++){for(s=0;s<n;s++){l[s][r]=c[r*u.channelCount+s]}}}var u=this,f=e.webaudio.getContext(),l=null,c=null,h=null;u.start.apply(u,arguments);l=f.createJavaScriptNode(u.bufferSize,u.channelCount,u.channelCount);u.sampleRate=f.sampleRate;l.onaudioprocess=p;l.connect(f.destination);u._context=f;u._node=l;u._callback=p;t.push(l)},{kill:function(){this._node.disconnect(0);for(var e=0;e<t.length;e++){if(t[e]===this._node){t.splice(e--,1)}}this._node=this._context=null;this.emit("kill")},getPlaybackTime:function(){return this._context.currentTime*this.sampleRate}},false,true);e.webkit=e.webaudio;e.webaudio.fix82795=t;e.webaudio.getContext=function(){var t=new n;e.webaudio.getContext=function(){return t};return t}})(this.Sink.sinks,[]);(function(e){e.sinks("worker",function(){function o(t){if(!e.isReady){e.initMSP(t)}e.ready();var i=e.channelCount,o=t.audioLength,u,f;n=n&&n.length===o*i?n:new a(o*i);r=r&&r.length===n.length?r:new a(o*i);s=s&&s.length===n.length?s:new a(o*i);n.set(s);r.set(s);e.process(n,e.channelCount);for(u=0;u<i;u++){for(f=0;f<o;f++){r[u*t.audioLength+f]=n[u+f*i]}}t.writeAudio(r)}function u(t){if(!e.isReady){e.initWA(t)}e.ready();var r=t.outputBuffer,o=r.numberOfChannels,u,f,l=r.length,c=r.size,h=new i(o),p;n=n&&n.length===l*o?n:new a(l*o);s=s&&s.length===n.length?s:new a(l*o);n.set(s);for(u=0;u<o;u++){h[u]=r.getChannelData(u)}e.process(n,e.channelCount);for(u=0;u<l;u++){for(f=0;f<o;f++){h[f][u]=n[u*e.channelCount+f]}}}var e=this,t=function(){return this}(),n=null,r=null,s=null;e.start.apply(e,arguments);importScripts();t.onprocessmedia=o;t.onaudioprocess=u;e._mspBufferFill=o;e._waBufferFill=u},{ready:false,initMSP:function(e){this.channelCount=e.audioChannels;this.sampleRate=e.audioSampleRate;this.bufferSize=e.audioLength*this.channelCount;this.ready=true;this.emit("ready",[])},initWA:function(e){var t=e.outputBuffer;this.channelCount=t.numberOfChannels;this.sampleRate=t.sampleRate;this.bufferSize=t.length*this.channelCount;this.ready=true;this.emit("ready",[])}})})(this.Sink);(function(e){(function(){function t(n,r){if(n&&r){t[n]=r}else if(n&&t[n]instanceof Function){e.interpolate=t[n]}return t[n]}e.interpolation=t;t("linear",function(e,t){var r=n.floor(t),i=r+1,s=t-r;i=i<e.length?i:0;return e[r]*(1-s)+e[i]*s});t("nearest",function(e,t){return t>=e.length-.5?e[0]:e[n.round(t)]});t("linear")})();e.resample=function(t,r,i,s,o){var u=arguments.length,f=u===2?r:u===3?r/i:s/r*o/i,l=t.length,c=n.ceil(l/f),h=new a(c),p,d;for(p=0,d=0;p<l;p+=f){h[d++]=e.interpolate(t,p)}return h}})(this.Sink);(function(e){e.deinterleave=function(e,t){var n=e.length,r=n/t,i=[],s,o;for(s=0;s<t;s++){i[s]=new a(r);for(o=0;o<r;o++){i[s][o]=e[o*t+s]}}return i};e.interleave=function(e,t,n){t=t||e.length;var r=e[0].length,i=e.length,s,o;n=n||new a(r*t);for(s=0;s<i;s++){for(o=0;o<r;o++){n[s+o*t]=e[s][o]}}return n};e.mix=function(e){var t=[].slice.call(arguments,1),r,i,s;for(s=0;s<t.length;s++){r=n.max(e.length,t[s].length);for(i=0;i<r;i++){e[i]+=t[s][i]}}return e};e.resetBuffer=function(e){var t=e.length,n;for(n=0;n<t;n++){e[n]=0}return e};e.clone=function(e,t){var n=e.length,r;t=t||new a(n);for(r=0;r<n;r++){t[r]=e[r]}return t};e.createDeinterleaved=function(e,t){var n=new i(t),r;for(r=0;r<t;r++){n[r]=new a(e)}return n};e.memcpy=function(e,t,n,r,i){e=e.subarray||e.slice?e:e.buffer;n=n.subarray||n.slice?n:n.buffer;e=t?e.subarray?e.subarray(t,i&&t+i):e.slice(t,i&&t+i):e;if(n.set){n.set(e,r)}else{for(var s=0;s<e.length;s++){n[s+r]=e[s]}}return n};e.memslice=function(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)};e.mempad=function(t,n,r){n=n.length?n:new t.constructor(n);e.memcpy(t,0,n,r);return n};e.linspace=function(e,t,n){var r,s,o,u;n=n.length?(r=n.length)&&n:i(r=n);u=(t-e)/--r;for(o=e+u,s=1;s<r;s++,o+=u){n[s]=o}n[0]=e;n[r]=t;return n};e.ftoi=function(e,t,r){var i,s=n.pow(2,t-1);r=r||new e.constructor(e.length);for(i=0;i<e.length;i++){r[i]=~~(s*e[i])}return r}})(this.Sink);(function(e){function t(t,n){e.EventEmitter.call(this);this.bufferSize=isNaN(t)||t===null?this.bufferSize:t;this.channelCount=isNaN(n)||n===null?this.channelCount:n;var r=this;this.callback=function(){return r.process.apply(r,arguments)};this.resetBuffer()}t.prototype={buffer:null,zeroBuffer:null,parentSink:null,bufferSize:4096,channelCount:2,offset:null,resetBuffer:function(){this.buffer=new a(this.bufferSize);this.zeroBuffer=new a(this.bufferSize)},process:function(e,t){if(this.offset===null){this.loadBuffer()}for(var n=0;n<e.length;n++){if(this.offset>=this.buffer.length){this.loadBuffer()}e[n]=this.buffer[this.offset++]}},loadBuffer:function(){this.offset=0;e.memcpy(this.zeroBuffer,0,this.buffer,0);this.emit("audioprocess",[this.buffer,this.channelCount])}};e.Proxy=t;e.prototype.createProxy=function(t){var n=new e.Proxy(t,this.channelCount);n.parentSink=this;this.on("audioprocess",n.callback);return n}})(this.Sink);void function(e){function t(){if(this.ringBuffer){(this.channelMode==="interleaved"?this.ringSpin:this.ringSpinInterleaved).apply(this,arguments)}}e.on("init",function(e){e.on("preprocess",t)});e.prototype.ringBuffer=null;e.prototype.ringSpin=function(e){var t=this.ringBuffer,n=e.length,r=t.length,i=this.ringOffset,s;for(s=0;s<n;s++){e[s]+=t[i];i=(i+1)%r}this.ringOffset=i};e.prototype.ringSpinDeinterleaved=function(e){var t=this.ringBuffer,n=e.length,r=t.length,i=t[0].length,s=r*i,o=this.ringOffset,u,a;for(u=0;u<n;u+=r){for(a=0;a<r;a++){e[u+a]+=t[a][o]}o=(o+1)%i}this.ringOffset=a}}(this.Sink);void function(e,t){t=e.prototype;e.on("init",function(e){e.asyncBuffers=[];e.syncBuffers=[];e.on("preprocess",e.writeBuffersSync);e.on("postprocess",e.writeBuffersAsync)});t.writeMode="async";t.asyncBuffers=t.syncBuffers=null;t.writeBuffersAsync=function(e){var t=this.asyncBuffers,r=e.length,i,s,o,u,a;if(t){for(o=0;o<t.length;o++){i=t[o];s=i.b.length;a=i.d;i.d-=n.min(a,r);for(u=0;u+a<r&&u<s;u++){e[u+a]+=i.b[u]}i.b=i.b.subarray(u+a);if(o>=s){t.splice(o--,1)}}}};t.writeBuffersSync=function(e){var t=this.syncBuffers,n=e.length,r=0,i=0;for(;r<n&&t.length;r++){e[r]+=t[0][i];if(t[0].length<=i){t.splice(0,1);i=0;continue}i++}if(t.length){t[0]=t[0].subarray(i)}};t.writeBufferAsync=function(t,n){t=this.mode==="deinterleaved"?e.interleave(t,this.channelCount):t;var r=this.asyncBuffers;r.push({b:t,d:isNaN(n)?~~((+(new Date)-this.previousHit)/1e3*this.sampleRate):n});return r.length};t.writeBufferSync=function(t){t=this.mode==="deinterleaved"?e.interleave(t,this.channelCount):t;var n=this.syncBuffers;n.push(t);return n.length};t.writeBuffer=function(){return this[this.writeMode==="async"?"writeBufferAsync":"writeBufferSync"].apply(this,arguments)};t.getSyncWriteOffset=function(){var e=this.syncBuffers,t=0,n;for(n=0;n<e.length;n++){t+=e[n].length}return t}}(this.Sink);void function(e){function t(e){this.boundTo=e;this.buffers=[];e.activeRecordings.push(this)}e.on("init",function(e){e.activeRecordings=[];e.on("postprocess",e.recordData)});e.prototype.activeRecordings=null;e.prototype.record=function(){var t=new e.Recording(this);this.emit("record",[t]);return t};e.prototype.recordData=function(e){var t=this.activeRecordings,n,r=t.length;for(n=0;n<r;n++){t[n].add(e)}};t.prototype={add:function(e){this.buffers.push(e)},clear:function(){this.buffers=[]},stop:function(){var e=this.boundTo.activeRecordings,t;for(t=0;t<e.length;t++){if(e[t]===this){e.splice(t--,1)}}},join:function(){var e=0,t=0,n=this.buffers,r,i,s,o=n.length;for(s=0;s<o;s++){e+=n[s].length}r=new a(e);for(s=0;s<o;s++){for(i=0;i<n[s].length;i++){r[t+i]=n[s][i]}t+=n[s].length}return r}};e.Recording=t}(this.Sink);R.prototype={sampleRate:44100,attack:.01,release:.01,sample:0,pushSample:function(e){this.sample=n.abs((e>this.sample?this.attack:this.release)*(this.sample-e)+e);return this.sample},getMix:function(){return this.sample}};var U=function(){"use strict";function e(e,t,n,r,i,s){var o=i.twiddle;for(var u=0;u<s;u++){var a=e[2*(t+n*u)],f=e[2*(t+n*u)+1];var l=e[2*(t+n*(u+s))],c=e[2*(t+n*(u+s))+1];var h=o[2*(0+r*u)],p=o[2*(0+r*u)+1];var d=l*h-c*p,v=l*p+c*h;var m=a+d,g=f+v;var y=a-d,b=f-v;e[2*(t+n*u)]=m;e[2*(t+n*u)+1]=g;e[2*(t+n*(u+s))]=y;e[2*(t+n*(u+s))+1]=b}}function t(e,t,n,r,i,s){var o=i.twiddle;var u=s,a=2*s;var f=r,l=2*r;var c=o[2*(0+r*s)+1];for(var h=0;h<s;h++){var p=e[2*(t+n*h)],d=e[2*(t+n*h)+1];var v=e[2*(t+n*(h+u))],m=e[2*(t+n*(h+u))+1];var g=o[2*(0+f*h)],y=o[2*(0+f*h)+1];var b=v*g-m*y,w=v*y+m*g;var E=e[2*(t+n*(h+a))],S=e[2*(t+n*(h+a))+1];var x=o[2*(0+l*h)],T=o[2*(0+l*h)+1];var N=E*x-S*T,C=E*T+S*x;var k=b+N,L=w+C;var A=p+k,O=d+L;e[2*(t+n*h)]=A;e[2*(t+n*h)+1]=O;var M=p-k*.5;var _=d-L*.5;var D=(b-N)*c;var P=(w-C)*c;var H=M-P;var B=_+D;e[2*(t+n*(h+u))]=H;e[2*(t+n*(h+u))+1]=B;var j=M+P;var F=_-D;e[2*(t+n*(h+a))]=j;e[2*(t+n*(h+a))+1]=F}}function r(e,t,n,r,i,s){var o,u,a,f;var l=i.twiddle;var c=s,h=2*s,p=3*s;var d=r,v=2*r,m=3*r;for(var g=0;g<s;g++){var y=e[2*(t+n*g)],b=e[2*(t+n*g)+1];var w=e[2*(t+n*(g+c))],E=e[2*(t+n*(g+c))+1];var S=l[2*(0+d*g)],x=l[2*(0+d*g)+1];var T=w*S-E*x,N=w*x+E*S;var C=e[2*(t+n*(g+h))],k=e[2*(t+n*(g+h))+1];var L=l[2*(0+v*g)],A=l[2*(0+v*g)+1];var O=C*L-k*A,M=C*A+k*L;var _=e[2*(t+n*(g+p))],D=e[2*(t+n*(g+p))+1];var P=l[2*(0+m*g)],H=l[2*(0+m*g)+1];var B=_*P-D*H,j=_*H+D*P;var F=y+O,I=b+M;var q=y-O,R=b-M;var U=T+B,z=N+j;var W=T-B,X=N-j;var V=F+U,$=I+z;if(i.inverse){o=q-X;u=R+W}else{o=q+X;u=R-W}var J=F-U,K=I-z;if(i.inverse){a=q+X;f=R-W}else{a=q-X;f=R+W}e[2*(t+n*g)]=V;e[2*(t+n*g)+1]=$;e[2*(t+n*(g+c))]=o;e[2*(t+n*(g+c))+1]=u;e[2*(t+n*(g+h))]=J;e[2*(t+n*(g+h))+1]=K;e[2*(t+n*(g+p))]=a;e[2*(t+n*(g+p))+1]=f}}function i(e,t,n,r,i,s,o){var u,a,f,l;var c=i.twiddle,h=i.n,p=new Float64Array(2*o);for(var d=0;d<s;d++){for(u=0,l=d;u<o;u++,l+=s){a=e[2*(t+n*l)];f=e[2*(t+n*l)+1];p[2*u]=a;p[2*u+1]=f}for(u=0,l=d;u<o;u++,l+=s){var v=0;a=p[2*0];f=p[2*0+1];e[2*(t+n*l)]=a;e[2*(t+n*l)+1]=f;for(var m=1;m<o;m++){v=(v+r*l)%h;var g=e[2*(t+n*l)],y=e[2*(t+n*l)+1];var b=p[2*m],w=p[2*m+1];var E=c[2*v],S=c[2*v+1];var x=b*E-w*S,T=b*S+w*E;var N=g+x,C=y+T;e[2*(t+n*l)]=N;e[2*(t+n*l)+1]=C}}}}function s(n,o,u,a,f,l,c,h,p){var d,v,m;var g=h.shift();var y=h.shift();if(y==1){for(d=0;d<g*y;d++){v=a[2*(f+l*c*d)];m=a[2*(f+l*c*d)+1];n[2*(o+u*d)]=v;n[2*(o+u*d)+1]=m}}else{for(d=0;d<g;d++){s(n,o+u*d*y,u,a,f+d*l*c,l*g,c,h.slice(),p)}}switch(g){case 2:e(n,o,u,l,p,y);break;case 3:t(n,o,u,l,p,y);break;case 4:r(n,o,u,l,p,y);break;default:i(n,o,u,l,p,y,g);break}}function u(e,t,n){var r=[].slice.call(arguments);r[0]=this.sampleRate=isNaN(e)||e===null?this.sampleRate:e;r[1]=this.bufferSize=isNaN(t)||t===null?this.bufferSize:t;r[2]=!!n;this.__super.apply(this,r.slice(1))}var o=function(e,t){if(arguments.length<2){throw new RangeError("You didn't pass enough arguments, passed `"+arguments.length+"'")}e=~~e;t=!!t;if(e<1){throw new RangeError("n is outside range, should be positive integer, was `"+e+"'")}this.inputBuffer=new Float64Array(2*e);this.outputBuffer=new Float64Array(2*e);var r={n:e,inverse:t,factors:[],twiddle:new Float64Array(2*e),scratch:new Float64Array(2*e)};var i=r.twiddle,s=2*n.PI/e;var o,u;for(o=0;o<e;o++){if(t){u=s*o}else{u=-s*o}i[2*o]=n.cos(u);i[2*o+1]=n.sin(u)}var a=4,f=n.floor(n.sqrt(e));while(e>1){while(e%a){switch(a){case 4:a=2;break;case 2:a=3;break;default:a+=2;break}if(a>f){a=e}}e/=a;r.factors.push(a);r.factors.push(e)}this.state=r;this.resetFT()};o.prototype.process=function(e,t,n){this.process_explicit(e||this.outputBuffer,0,1,t||this.inputBuffer,0,1,n)};o.prototype.process_explicit=function(e,t,n,r,i,o,u){var a,f,l;n=~~n;o=~~o;u=u||this.inputType;var c=u==="real"?u:"complex";if(n<1){throw new RangeError("outputStride is outside range, should be positive integer, was `"+n+"'")}if(o<1){throw new RangeError("inputStride is outside range, should be positive integer, was `"+o+"'")}if(c=="real"){for(a=0;a<this.state.n;a++){f=r[i+o*a];l=0;this.state.scratch[2*a]=f;this.state.scratch[2*a+1]=l}s(e,t,n,this.state.scratch,0,1,1,this.state.factors.slice(),this.state)}else{if(r==e){s(this.state.scratch,0,1,r,i,1,o,this.state.factors.slice(),this.state);for(a=0;a<this.state.n;a++){f=this.state.scratch[2*a];l=this.state.scratch[2*a+1];e[2*(t+n*a)]=f;e[2*(t+n*a)+1]=l}}else{s(e,t,n,r,i,1,o,this.state.factors.slice(),this.state)}}};o.prototype.__super=o;u.prototype=o.prototype;u.prototype.inputType="real";u.prototype.sampleRate=44100;u.prototype.bufferSize=4096;u.prototype.resetFT=function(e){this.inputBuffer=new Float64Array(2*this.bufferSize);this.outputBuffer=new Float64Array(2*this.bufferSize);this.spectrum=new Float64Array(this.bufferSize/2);this.bandWidth=this.sampleRate/this.bufferSize/2;this.peakBand=0;this.peak=0;this.sample=0;this.offset=0;this.maxOffset=this.inputType==="real"?this.bufferSize:this.bufferSize*2;this.pushSample=this._pushSample};u.prototype.pushSample=function(e){this.resetFT();return this.pushSample(e)};u.prototype._pushSample=function(e){this.inputBuffer[this.offset]=e;this.sample=e;this.offset=(this.offset+1)%this.maxOffset;if(!this.offset)this.process();return e};u.prototype.getMix=function(){return this.sample};u.prototype.getBandFrequency=function(e){return this.bandWidth*e+this.bandWidth*.5};u.prototype.calculateSpectrum=function(){var e,t,r,i,s;var o=this.spectrum;var u=this.outputBuffer;var a=2/this.bufferSize;var f=this.bufferSize/2;for(e=0,t=2;e<f;e++,t+=2){r=u[t+0];i=u[t+1];s=a*n.sqrt(r*r+i*i);if(s>this.peak){this.peakBand=e;this.peak=s}this.spectrum[e]=s}};u.prototype._process=u.prototype.process;u.prototype.process=function(){this._process.apply(this,arguments);this.calculateSpectrum()};return u}();u.ADSREnvelope=E;u.StepSequencer=S;u.UIControl=x;u.BiquadFilter=T;u.BitCrusher=N;u.Chorus=C;u.CombFilter=k;u.Compressor=L;u.Convolution=A;u.Delay=O;u.Distortion=M;u.GainController=D;u.IIRFilter=P;u.LP12Filter=B;u.Limiter=H;u.Reverb=_;u.Noise=j;u.Oscillator=F;u.Sampler=I;u.Amplitude=R;u.FFT=U;u.AudioDevice=u.Sink=function(){return this}().Sink;u.Automation=v;u.BufferEffect=m;u.EffectClass=y;u.GeneratorClass=b;u.codecs=u.Codec=g;u.plugins=w;while(s.list.length){s.list.shift().call(u)}s=null;void function(e,t){function n(e,t,r,i){var s,o;if(t){r=r||t.prototype;s=t.prototype=new y;s.name=s.fxid=e;n[e]=p(e,t,i);for(o in r){if(r.hasOwnProperty(o)){s[o]=r[o]}}for(o in y){if(o!=="prototype"&&y.hasOwnProperty(o)){n[e][o]=y[o]}}}return n[e]}u.effects=n;for(t=0;t<e.length;t++){u[e[t]]=n(e[t],u[e[t]],u[e[t]].prototype)}n("BiquadAllPassFilter",T.AllPass);n("BiquadBandPassFilter",T.BandPass);n("BiquadHighPassFilter",T.HighPass);n("BiquadLowPassFilter",T.LowPass);n("FreeverbAllPassFilter",_.AllPassFilter)}(["BiquadFilter","BitCrusher","Chorus","CombFilter","Compressor","Convolution","Delay","Distortion","GainController","IIRFilter","LP12Filter","Limiter","Reverb","Amplitude","FFT"]);void function(e,t){function n(e,t,r,i){var s,o;if(t){r=r||t.prototype;s=t.prototype=new b;s.name=s.fxid=e;n[e]=p(e,t,i);for(o in r){if(r.hasOwnProperty(o)){s[o]=r[o]}}for(o in b){if(o!=="prototype"&&b.hasOwnProperty(o)){n[e][o]=b[o]}}}return n[e]}u.generators=n;for(t=0;t<e.length;t++){u[e[t]]=n(e[t],u[e[t]],u[e[t]].prototype)}}(["Noise","Oscillator","Sampler","ADSREnvelope","StepSequencer","UIControl"]);g("wav",u.PCMData);u.version="0.6.6";return u}.call(typeof exports==="undefined"?{}:this,this.window||global,Math,Object,Array)

	var  audioProcess, dev, osc, seq;


	audioProcess = function(buffer, channelCount) {
	  var i, l, n, pw, _results;
	  l = buffer.length;
	  i = void 0;
	  n = void 0;
	  i = 0;
	  _results = [];
	  while (i < l) {
	    osc.generate();
	    pw = osc.pulseWidth * 255;
	    pw = (pw ^ pw >> 7) | (pw + Math.random() * 1.002);
	    pw += Math.random() * 1.01;
	    osc.pulseWidth = (pw & 255) / 255;
	    osc.frequency = osc.frequency ^ (osc.frequency >> 8);
	    osc.frequency += Math.random() * (Math.random() * 10);
	    sum = osc.getMix(n) * 0.3
	    buffer[i] = buffer[i + 1] = buffer[i + 2] = buffer[i + 3] = buffer[i + 4] = sum;
	    _results.push(i += 5);
	  }
	  return _results;
	};
	dev = new Audiolib.Sink(audioProcess);
	osc = new Audiolib.Oscillator(dev.sampleRate);
	osc.frequency = -2009687;


		</script>
	</body>

</html>